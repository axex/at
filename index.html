<!DOCTYPE html>
<html ng-app="at">
  <head>
    <meta charset="utf-8">
    <title>AT - Login Helper</title>
    <link rel="stylesheet" href="assets/css/main.css"/>
    <link rel="stylesheet" href="assets/css/font-browser.css"/>
    <link rel="stylesheet" href="assets/css/footer.css"/>
    <link href="assets/vendors/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet"/>

    <script src="assets/vendors/jquery/dist/jquery.js"></script>
    <script src="assets/vendors/bootstrap/dist/js/bootstrap.js"></script>
    <script src="assets/vendors/angular/angular.min.js"></script>
  </head>

  <body ng-controller="ATController" data-spy="scroll" data-target=".sidebar">
    <div class="wrap">

      <header>
        <nav class="navbar navbar-inverse navbar-fixed-top">
          <div class="container">
            <div class="navbar-header">
              <a class="navbar-brand" href="#">AT</a>
              <p class="navbar-text">Login by just one-click!</p>
            </div>
            <button class="btn navbar-right navbar-btn btn-sm"
                    ng-class="{'btn-info': !isAddingEnv, 'btn-success': isAddingEnv}"
                    ng-click="addEnv()">
              {{ isAddingEnv ? 'Adding' : 'Add an environment' }}
            </button>
          </div>
        </nav>
      </header>

      <article class="container">

        <section class="ng-hide" ng-show="isAddingEnv" ng-controller="EnvNewController">

          <div class="page-header">
            <h1>Add an Environment</h1>
          </div>

          <form class="form-horizontal">

            <div class="form-group">
              <label for="" class="col-sm-3 control-label">Environment Name:</label>
              <div class="col-sm-8">
                <input type="text" class="form-control"
                       placeholder="Enter environment name." ng-model="newEnv.name"/>
              </div>
            </div>

            <div class="account-add-url form-group">
              <label for="" class="col-sm-3 control-label">Environment Url:</label>
              <div class="col-sm-8">
                <input type="url" class="form-control"
                       placeholder="Enter environment url." ng-model="newEnv.url"/>
              </div>
            </div>

            <div class="account-textarea form-group">
              <label for="" class="col-sm-3 control-label">Environment accounts:</label>
              <div class="col-sm-8">
                <textarea class="form-control" rows="10"
                          placeholder="Enter account info here." ng-model="newEnv.accountStr">
                </textarea>
              </div>
            </div>


            <div class="edit-buttons form-group">
              <div class="col-sm-offset-3 col-sm-8">
                <button class="btn btn-primary" ng-click="save()">Save</button> &nbsp;
                <button class="btn btn-danger" ng-click="cancel()">Cancel</button>
              </div>
            </div>
          </form>

        </section>

        <section class="env-list row" ng-hide="isAddingEnv">

          <div class="col-sm-9">
            <div ng-repeat="env in environments | filter : query"
            class="environment" ng-controller="EnvController">
              <div class="page-header" id="{{env.id}}">
                <h1>
                  {{env.name}}
                  <p class="env-url">{{env.url}}</p>
                  <p>
                    <button class="btn btn-info btn-xs" ng-click="edit(env)">
                      <i class="glyphicon glyphicon-edit"></i> Edit
                    </button>
                    <button class="btn btn-danger btn-xs" ng-click="remove(env)">
                      <i class="glyphicon glyphicon-remove"></i> Remove
                    </button>
                  </p>
                </h1>
              </div>

              <table class="table table-striped" ng-show="!env.isEditing">
                <thead>
                  <th>Account Number</th>
                  <th>Account Type</th>
                  <th>Open with</th>
                </thead>
                <tbody>
                  <tr ng-repeat="account in env.accounts | filter : query" ng-controller="AccountController">
                    <td>{{account.number}}</td>
                    <td>{{account.type}}</td>
                    <td>
                      <span class="browser" ng-repeat="bs in browsers">
                        <a href="#" ng-click="startBrowser($event)" class="label"
                           ng-class="{'label-info': bs === 'ie', 'label-danger': bs === 'firefox', 'label-warning': bs === 'chrome', 'label-default': bs === 'safari'}">
                          <i class="icon icon-{{bs}}"></i>
                        </a> &nbsp;
                      </span>
                    </td>
                  </tr>
                </tbody>
              </table>

              <form name="envEditForm" class="ng-hide form-horizontal" ng-show="env.isEditing">
                <div class="account-edit-name form-group">
                  <label for="" class="col-sm-3 control-label">Environment Name:</label>
                  <div class="col-sm-8">
                    <input type="text" name="envName" class="form-control" placeholder="Enter environment name." ng-model="env.name">
                  </div>
                </div>

                <div class="account-edit-url form-group">
                  <label for="" class="col-sm-3 control-label">Environment Url:</label>
                  <div class="col-sm-8">
                    <input type="text" name="envUrl" class="form-control" placeholder="Enter environment url." ng-model="env.url">
                  </div>
                </div>

                <div class="form-group">
                  <label for="" class="col-sm-3 control-label">Environment accounts:</label>
                  <div class="col-sm-8">
                    <textarea name="envAccountStr" class="account-edit-accounts form-control" rows="10" placeholder="Enter account info here." ng-model="env.accountStr">
                    </textarea>
                  </div>
                </div>

                <div class="form-group">
                  <div class="edit-buttons col-sm-offset-3">
                    <button class="btn btn-primary btn-save" ng-click="save(env)">Save</button> &nbsp;
                    <button class="btn btn-danger" ng-click="cancel(env)">Cancel</button>
                  </div>
                </div>
              </form>

            </div>
          </div>

          <div class="col-sm-3 sidebar">
            <div class="affix" data-spy="affix">
              <form role="search">
                <input type="text" autofocus class="form-control" placeholder="Search" ng-model="query">
              </form>

              <h4>Environment List</h4>
              <ul class="nav">
                <li ng-repeat="env in environments">
                  <a ng-href="#{{env.id}}">
                    {{ env.name }}
                  </a>
                </li>
              </ul>
            </div>
          </div>

        </section>

      </article>

    </div>

    <script src="client/app.js"></script>

  </body>
</html>
